let studentsData = [
    [{
        name: "Ali",
        id: "SE-101",
        semesters: [
            {
                semesterObtainedMarks: [
                    { programmingFundamentals: 78 },
                    { ict: 72 },
                    { calculus: 70 },
                    { discreteMath: 75 },
                    { computerBasics: 80 },
                ]
            },
            {
                semesterObtainedMarks: [
                    { oop: 82 },
                    { dataStructures: 76 },
                    { linearAlgebra: 68 },
                    { digitalLogicDesign: 74 },
                    { softwareEngineeringIntro: 79 }
                ]
            },
            {
                semesterObtainedMarks: [
                    { databaseSystems: 85 },
                    { operatingSystems: 77 },
                    { algorithms: 73 },
                    { webEngineering: 81 },
                    { probabilityStats: 70 }
                ]
            },
            {
                semesterObtainedMarks: [
                    { softwareArchitecture: 80 },
                    { computerNetworks: 75 },
                    { artificialIntelligence: 72 },
                    { hci: 78 },
                    { informationSecurity: 74 }
                ]
            },
            {
                semesterObtainedMarks: [
                    { softwareProjectManagement: 83 },
                    { sqa: 79 },
                    { mobileAppDevelopment: 86 },
                    { cloudComputing: 81 },
                    { finalYearProject: 90 }
                ]
            }
        ],
        semesterResult: [
            { semesterName: "Semester 1", semesterTotalMarks: 0, semesterPercentage: 0, grade: "" },
            { semesterName: "Semester 2", semesterTotalMarks: 0, semesterPercentage: 0, grade: "" },
            { semesterName: "Semester 3", semesterTotalMarks: 0, semesterPercentage: 0, grade: "" },
            { semesterName: "Semester 4", semesterTotalMarks: 0, semesterPercentage: 0, grade: "" },
            { semesterName: "Semester 5", semesterTotalMarks: 0, semesterPercentage: 0, grade: "" },
        ]
    }],

    [{
        name: "Ahmed",
        id: "SE-102",
        semesters: [
            {
                semesterObtainedMarks: [
                    { programmingFundamentals: 65 },
                    { ict: 68 },
                    { calculus: 60 },
                    { discreteMath: 70 },
                    { computerBasics: 72 },
                ]
            },
            {
                semesterObtainedMarks: [
                    { oop: 75 },
                    { dataStructures: 69 },
                    { linearAlgebra: 64 },
                    { digitalLogicDesign: 71 },
                    { softwareEngineeringIntro: 73 }
                ]
            },
            {
                semesterObtainedMarks: [
                    { databaseSystems: 78 },
                    { operatingSystems: 70 },
                    { algorithms: 66 },
                    { webEngineering: 74 },
                    { probabilityStats: 69 }
                ]
            },
            {
                semesterObtainedMarks: [
                    { softwareArchitecture: 72 },
                    { computerNetworks: 68 },
                    { artificialIntelligence: 65 },
                    { hci: 70 },
                    { informationSecurity: 67 }
                ]
            },
            {
                semesterObtainedMarks: [
                    { softwareProjectManagement: 76 },
                    { sqa: 73 },
                    { mobileAppDevelopment: 79 },
                    { cloudComputing: 75 },
                    { finalYearProject: 82 }
                ]
            }
        ],
        semesterResult: [
            { semesterName: "Semester 1", semesterTotalMarks: 0, semesterPercentage: 0, grade: "" },
            { semesterName: "Semester 2", semesterTotalMarks: 0, semesterPercentage: 0, grade: "" },
            { semesterName: "Semester 3", semesterTotalMarks: 0, semesterPercentage: 0, grade: "" },
            { semesterName: "Semester 4", semesterTotalMarks: 0, semesterPercentage: 0, grade: "" },
            { semesterName: "Semester 5", semesterTotalMarks: 0, semesterPercentage: 0, grade: "" },
        ]
    }],

    [{
        name: "Sara",
        id: "SE-103",
        semesters: [
            {
                semesterObtainedMarks: [
                    { programmingFundamentals: 88 },
                    { ict: 85 },
                    { calculus: 82 },
                    { discreteMath: 90 },
                    { computerBasics: 87 },
                ]
            },
            {
                semesterObtainedMarks: [
                    { oop: 91 },
                    { dataStructures: 84 },
                    { linearAlgebra: 79 },
                    { digitalLogicDesign: 86 },
                    { softwareEngineeringIntro: 88 }
                ]
            },
            {
                semesterObtainedMarks: [
                    { databaseSystems: 92 },
                    { operatingSystems: 89 },
                    { algorithms: 85 },
                    { webEngineering: 90 },
                    { probabilityStats: 83 }
                ]
            },
            {
                semesterObtainedMarks: [
                    { softwareArchitecture: 87 },
                    { computerNetworks: 84 },
                    { artificialIntelligence: 81 },
                    { hci: 86 },
                    { informationSecurity: 88 }
                ]
            },
            {
                semesterObtainedMarks: [
                    { softwareProjectManagement: 90 },
                    { sqa: 88 },
                    { mobileAppDevelopment: 93 },
                    { cloudComputing: 89 },
                    { finalYearProject: 95 }
                ]
            }
        ],
        semesterResult: [
            { semesterName: "Semester 1", semesterTotalMarks: 0, semesterPercentage: 0, grade: "" },
            { semesterName: "Semester 2", semesterTotalMarks: 0, semesterPercentage: 0, grade: "" },
            { semesterName: "Semester 3", semesterTotalMarks: 0, semesterPercentage: 0, grade: "" },
            { semesterName: "Semester 4", semesterTotalMarks: 0, semesterPercentage: 0, grade: "" },
            { semesterName: "Semester 5", semesterTotalMarks: 0, semesterPercentage: 0, grade: "" },
        ]
    }],

    [{
        name: "Usman",
        id: "SE-104",
        semesters: [
            {
                semesterObtainedMarks: [
                    { programmingFundamentals: 72 },
                    { ict: 74 },
                    { calculus: 69 },
                    { discreteMath: 71 },
                    { computerBasics: 75 },
                ]
            },
            {
                semesterObtainedMarks: [
                    { oop: 78 },
                    { dataStructures: 73 },
                    { linearAlgebra: 70 },
                    { digitalLogicDesign: 76 },
                    { softwareEngineeringIntro: 77 }
                ]
            },
            {
                semesterObtainedMarks: [
                    { databaseSystems: 80 },
                    { operatingSystems: 74 },
                    { algorithms: 72 },
                    { webEngineering: 79 },
                    { probabilityStats: 71 }
                ]
            },
            {
                semesterObtainedMarks: [
                    { softwareArchitecture: 76 },
                    { computerNetworks: 73 },
                    { artificialIntelligence: 70 },
                    { hci: 75 },
                    { informationSecurity: 72 }
                ]
            },
            {
                semesterObtainedMarks: [
                    { softwareProjectManagement: 81 },
                    { sqa: 78 },
                    { mobileAppDevelopment: 84 },
                    { cloudComputing: 80 },
                    { finalYearProject: 88 }
                ]
            }
        ],
        semesterResult: [
            { semesterName: "Semester 1", semesterTotalMarks: 0, semesterPercentage: 0, grade: "" },
            { semesterName: "Semester 2", semesterTotalMarks: 0, semesterPercentage: 0, grade: "" },
            { semesterName: "Semester 3", semesterTotalMarks: 0, semesterPercentage: 0, grade: "" },
            { semesterName: "Semester 4", semesterTotalMarks: 0, semesterPercentage: 0, grade: "" },
            { semesterName: "Semester 5", semesterTotalMarks: 0, semesterPercentage: 0, grade: "" },
        ]
    }],

    [{
        name: "Ayesha",
        id: "SE-105",
        semesters: [
            {
                semesterObtainedMarks: [
                    { programmingFundamentals: 81 },
                    { ict: 79 },
                    { calculus: 76 },
                    { discreteMath: 83 },
                    { computerBasics: 85 },
                ]
            },
            {
                semesterObtainedMarks: [
                    { oop: 84 },
                    { dataStructures: 80 },
                    { linearAlgebra: 75 },
                    { digitalLogicDesign: 82 },
                    { softwareEngineeringIntro: 86 }
                ]
            },
            {
                semesterObtainedMarks: [
                    { databaseSystems: 88 },
                    { operatingSystems: 83 },
                    { algorithms: 79 },
                    { webEngineering: 85 },
                    { probabilityStats: 78 }
                ]
            },
            {
                semesterObtainedMarks: [
                    { softwareArchitecture: 82 },
                    { computerNetworks: 80 },
                    { artificialIntelligence: 77 },
                    { hci: 84 },
                    { informationSecurity: 81 }
                ]
            },
            {
                semesterObtainedMarks: [
                    { softwareProjectManagement: 87 },
                    { sqa: 85 },
                    { mobileAppDevelopment: 89 },
                    { cloudComputing: 86 },
                    { finalYearProject: 92 }
                ]
            }
        ],
        semesterResult: [
            { semesterName: "Semester 1", semesterTotalMarks: 0, semesterPercentage: 0, grade: "" },
            { semesterName: "Semester 2", semesterTotalMarks: 0, semesterPercentage: 0, grade: "" },
            { semesterName: "Semester 3", semesterTotalMarks: 0, semesterPercentage: 0, grade: "" },
            { semesterName: "Semester 4", semesterTotalMarks: 0, semesterPercentage: 0, grade: "" },
            { semesterName: "Semester 5", semesterTotalMarks: 0, semesterPercentage: 0, grade: "" },
        ]
    }]
];






let indexReturn = 0;




// let semestersDefaultData = {
//     semester1 : {},
// }

let defaultvar1 = JSON.parse(JSON.stringify(studentsData[indexReturn][0].semesters[0].semesterObtainedMarks));
// semestersDefaultData.semester1 = defaultvar1;

let sumOfTotalMarks = 0;

for (let key in defaultvar1) {
    defaultvar1[key] = 100;
    sumOfTotalMarks += defaultvar1[key];
}




// function getSubjectsMark1() {
//     for (let i = 0; i < studentsData[0].semesters.length; i++) {

//         semesterVar = studentsData[0].semesters[i].semesterObtainedMarks;

//         studentsData[0].semesterResult[i].semesterTotalMarks = 0;


//         if (semesterVar == studentsData[0].semesters[0].semesterObtainedMarks) {
//             for (let key1 in semesterVar) {
//                 for (let key2 in semesterVar[key1]) {
//                     studentsData[0].semesterResult[0].semesterTotalMarks += semesterVar[key1][key2];
//                 }
//             }
//         }

//         if (semesterVar == studentsData[0].semesters[1].semesterObtainedMarks) {
//             for (let key1 in semesterVar) {
//                 for (let key2 in semesterVar[key1]) {
//                     studentsData[0].semesterResult[1].semesterTotalMarks += semesterVar[key1][key2];
//                 }
//             }
//         }

//         if (semesterVar == studentsData[0].semesters[2].semesterObtainedMarks) {
//             for (let key1 in semesterVar) {
//                 for (let key2 in semesterVar[key1]) {
//                     studentsData[0].semesterResult[2].semesterTotalMarks += semesterVar[key1][key2];
//                 }
//             }
//         }

//         if (semesterVar == studentsData[0].semesters[3].semesterObtainedMarks) {
//             for (let key1 in semesterVar) {
//                 for (let key2 in semesterVar[key1]) {
//                     studentsData[0].semesterResult[3].semesterTotalMarks += semesterVar[key1][key2];
//                 }
//             }
//         }

//         if (semesterVar == studentsData[0].semesters[4].semesterObtainedMarks) {
//             for (let key1 in semesterVar) {
//                 for (let key2 in semesterVar[key1]) {
//                     studentsData[0].semesterResult[4].semesterTotalMarks += semesterVar[key1][key2];
//                 }
//             }
//         }
//     }
// }
// getSubjectsMark1()


let semesterVar;

let semArr;


function getSubjectsTotalMarks() {


    for (let i = 0; i < studentsData[indexReturn][0].semesters.length; i++) {

        studentsData[indexReturn][0].semesterResult[i].semesterTotalMarks = 0;

        semesterVar = studentsData[indexReturn][0].semesters[i].semesterObtainedMarks;
        if (semesterVar == studentsData[indexReturn][0].semesters[i].semesterObtainedMarks) {
            for (let key1 in semesterVar) {
                for (let key2 in semesterVar[key1]) {
                    studentsData[indexReturn][0].semesterResult[i].semesterTotalMarks += semesterVar[key1][key2];
                }
            }
        }
    }
}






let totalMarks = 100;

let semesterTotalMarksVar = [];

let semesterTotalMarksVarFn = () => {
    semesterTotalMarksVar = [
        studentsData[indexReturn][0].semesterResult[0].semesterTotalMarks,
        studentsData[indexReturn][0].semesterResult[1].semesterTotalMarks,
        studentsData[indexReturn][0].semesterResult[2].semesterTotalMarks,
        studentsData[indexReturn][0].semesterResult[3].semesterTotalMarks,
        studentsData[indexReturn][0].semesterResult[4].semesterTotalMarks,
    ]
}

let semesterPercentageVar = [];

let semesterPercentageVarFn = () => {
    for (let i = 0; i < studentsData[indexReturn][0].semesterResult.length; i++) {
        studentsData[indexReturn][0].semesterResult[i].semesterPercentage =  (semesterTotalMarksVar[i] / sumOfTotalMarks * 100).toFixed();
    }

    semesterPercentageVar = [
        studentsData[indexReturn][0].semesterResult[0].semesterPercentage,
        studentsData[indexReturn][0].semesterResult[1].semesterPercentage,
        studentsData[indexReturn][0].semesterResult[2].semesterPercentage,
        studentsData[indexReturn][0].semesterResult[3].semesterPercentage,
        studentsData[indexReturn][0].semesterResult[4].semesterPercentage,
    ]
}






console.log(studentsData);
console.log(semesterTotalMarksVar);
console.log(semesterPercentageVar);


function gradeMarker() {
    for (let i = 0; i < semesterPercentageVar.length; i++) {

        if (semesterPercentageVar[i] >= 90) {
            studentsData[indexReturn][0].semesterResult[i].grade = "A+";
        }
        else if (semesterPercentageVar[i] >= 80) {
            studentsData[indexReturn][0].semesterResult[i].grade = "A";
        }
        else if (semesterPercentageVar[i] >= 70) {
            studentsData[indexReturn][0].semesterResult[i].grade = "B";
        }
        else if (semesterPercentageVar[i] >= 60) {
            studentsData[indexReturn][0].semesterResult[i].grade = "C";
        }
        else if (semesterPercentageVar[i] >= 50) {
            studentsData[indexReturn][0].semesterResult[i].grade = "D";
        }
        else {
            studentsData[indexReturn][0].semesterResult[i].grade = "Fail";
        }
    }
}


for (let i = 0; i < studentsData[indexReturn][0].semesterResult.length; i++) {
    console.log(studentsData[indexReturn][0].semesterResult[i].grade)
}












// const getEachSubjectsNumbersHTML = () => {
//     let subjectsHTML = "";
//         let subjectNumberArr = studentsData[0][0].semesters[0].semesterObtainedMarks;

//         for(let i = 0; i < subjectNumberArr.length; i++){
//             for(let subject in subjectNumberArr[i]){
//                 subjectsHTML += `<tr>
//                             <th>Subject Name</th>
//                             <td>${subjectNumberArr[i][subject]}</td>
//                             <td>${totalMarks}</td>
//                         </tr>`
//             }
//         }
// }
// getEachSubjectsNumbersHTML()


let reportCard = document.getElementById("reportCard");



function getStdsIndex() {
    indexReturn = parseInt(this.id);
    getSubjectsTotalMarks();
    semesterTotalMarksVarFn();
    semesterPercentageVarFn();
    gradeMarker();

    const createSemesterReportCardHTMLThroughMap = () => {
        let studentsDataMapReturn = studentsData[indexReturn][0].semesterResult.map((data, index) => {


            let subjectsHTML = "";
            let subjectNumberArr = studentsData[indexReturn][0].semesters[index].semesterObtainedMarks;

            for (let i = 0; i < subjectNumberArr.length; i++) {
                for (let subject in subjectNumberArr[i]) {
                    subjectsHTML += `<tr>
                            <th>Subject Name</th>
                            <td>${subjectNumberArr[i][subject]}</td>
                            <td>${totalMarks}</td>
                        </tr>`
                }
            }

            return `
                <h3 class="semester-heading">${data.semesterName}</h3>
                    <table>
                        <tr>
                            <th>Subjects</th>
                            <th>Obtained Mark</th>
                            <th>Total Marks</th>
                        </tr>
                        ${subjectsHTML}
                    </table>
                    <table>
                        <tr class="last-table">
                            <th>Total Obtained Marks</th>
                            <td>${data.semesterTotalMarks} / ${sumOfTotalMarks}</td>
                        </tr>
                        <tr class="last-table">
                            <th>Percentage</th>
                            <td>${data.semesterPercentage}%</td>
                        </tr>
                        <tr class="last-table">
                            <th>Grade</th>
                            <td>${data.grade}</td>
                        </tr>
                    </table>`
        });


        reportCard.innerHTML = studentsDataMapReturn.join("");
    }

    createSemesterReportCardHTMLThroughMap();

}

let stds = document.getElementsByClassName("stds");

let stdsArr = [];

for (let i = 0; i < stds.length; i++) {
    stds[i].addEventListener("click", getStdsIndex);
    stds[i].addEventListener("click", stdsActiveAdd);
}

function stdsActiveAdd () {
    this.classList.add("active");
    stdsActiveRemove()
    stdsArr.push(this);
}
function stdsActiveRemove () {
    if(stdsArr == false);

    else{
    stdsArr[0].classList.remove("active");
    stdsArr.shift();
    }

}